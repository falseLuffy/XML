!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).XML=e()}(this,function(){"use strict";function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function a(c){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach(function(t){var e,n,r;e=c,r=o[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(t){Object.defineProperty(c,t,Object.getOwnPropertyDescriptor(o,t))})}return c}var f="<(\\w+)((\\s+([\\w][\\-\\d\\w]*?=(['\"])([^'\"<>]*?)\\5))*)*\\s*?>([^<>]*?)<\\/\\1>",u="<(\\w+)((\\s+([\\w][\\-\\d\\w]*?=(['\"])([^'\"<>]*?)\\5))*)*\\s*/>";function r(t,i,a,u){for(;t.test(a);){a.match(t).forEach(function(t){var e=function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}(),r="\\$\\{(.*?)\\}",n=new RegExp(r,"g"),c=(t.match(new RegExp(f))||[])[7]||"",o=(c.match(n)||[]).map(function(t){var e=(t.match(new RegExp(r))||[])[1]||"",n=u[e];return delete u[e],n});c.replace(n,"&&&&").split("&&&&").forEach(function(t,e){t.trim()&&o.splice(e,0,t.trim())}),a=a.replace(t,"${".concat(e,"}")),u[e]={xml:t,children:o,tag:(t.match(new RegExp(i))||[])[1]||""}})}return{tagMap:u,xml:a}}function i(t,e){var n="";return Array.isArray(t)?t.forEach(function(t){n+=i(t,Object.keys(t)[0])}):n+=function(t,e){var n=Object.keys(e),r=n.filter(function(t){return"object"!==o(e[t])&&"text"!==t}).map(function(t){return"".concat(t,'="').concat(e[t],'"')}).join(" ");r=r?" "+r:"";var c=n.filter(function(t){return"object"===o(e[t])}).map(function(t){return i(e[t],t)});return"children"!==t?"text"!==t?e.children&&e.children.length?"<".concat(t).concat(r,">").concat(c,"</").concat(t,">"):"<".concat(t).concat(r," />"):e.text:c}(e,t[e]),n}return{parse:function(t){var e={},n=new RegExp(f,"g");return t=r(new RegExp(u,"g"),new RegExp(u),t,e).xml,t=r(n,new RegExp(f),t,e).xml,Object.keys(e).map(function(t){return function e(t){if(!t)return;{if(!Array.isArray(t)){var n={},r={},c="([\\w][\\-\\d\\w]*?)=((['\"])([^'\"<>]*?)\\3)",o=t.xml&&(t.xml.match(new RegExp(f))||t.xml.match(new RegExp(u))||[])[2]||"",i=t.xml?void 0:t;return(o.match(new RegExp(c,"g"))||[]).forEach(function(t){var e=t.match(c);r[e[1]]=e[4]}),t.tag?n[t.tag]=a(a({},r),{},{children:(t.children||[]).map(function(t){return e(t)})}):n.text={text:i},n}t.map(function(t){return e(t)})}}(e[t])})},stringify:function(t){return"".concat("<?xml version='1.0' encoding='utf-8'?>").concat(i(t))}}});
